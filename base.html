<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}ShopLite{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <script defer src="{{ url_for('static', filename='js/app.js') }}"></script>
</head>
<body>
  {# ===== DESKTOP HEADER (>=1200px) ===== #}
  <header class="header desktop-only">
    <div class="container header-row">
      <a class="brand" href="{{ url_for('main.home') }}">ShopLite</a>

      <form class="search" action="{{ url_for('main.catalog') }}" method="get">
        <input name="q" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É..." value="{{ request.args.get('q','') }}">
        <button class="btn btn-primary" type="submit">–ù–∞–π—Ç–∏</button>
      </form>

      <nav class="nav">
        <a href="{{ url_for('main.catalog') }}">–ö–∞—Ç–∞–ª–æ–≥</a>
        <a href="{{ url_for('main.about') }}">–û –Ω–∞—Å</a>
        <a href="{{ url_for('main.contacts') }}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        <a class="cart-link" href="{{ url_for('main.cart') }}">–ö–æ—Ä–∑–∏–Ω–∞ <span class="badge">{{ cart_count() }}</span></a>
        {% if current_user() %}
          {% if current_user().role == 'admin' %}
            <a href="{{ url_for('admin.dashboard') }}">–ê–¥–º–∏–Ω</a>
          {% endif %}
          <a href="{{ url_for('main.account') }}">–ö–∞–±–∏–Ω–µ—Ç</a>
          <form class="inline" action="{{ url_for('auth.logout') }}" method="post">
            <button class="btn btn-ghost" type="submit">–í—ã–π—Ç–∏</button>
          </form>
        {% else %}
          <a class="btn btn-ghost" href="{{ url_for('auth.login') }}">–í—Ö–æ–¥</a>
          <a class="btn btn-primary" href="{{ url_for('auth.register') }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        {% endif %}
      </nav>
    </div>
  </header>

  {# ===== MOBILE HEADER (<1200px) ===== #}
  <header class="header mobile-only">
    <div class="container header-row">
      <a class="brand" href="{{ url_for('main.home') }}">ShopLite</a>
      <button class="icon-btn" id="mobileMenuBtn" aria-label="–ú–µ–Ω—é">‚ò∞</button>
    </div>
    <div class="container mobile-menu" id="mobileMenu">
      <form class="search" action="{{ url_for('main.catalog') }}" method="get">
        <input name="q" placeholder="–ü–æ–∏—Å–∫..." value="{{ request.args.get('q','') }}">
        <button class="btn btn-primary" type="submit">–ù–∞–π—Ç–∏</button>
      </form>
      <div class="mobile-links">
        <a href="{{ url_for('main.catalog') }}">–ö–∞—Ç–∞–ª–æ–≥</a>
        <a href="{{ url_for('main.about') }}">–û –Ω–∞—Å</a>
        <a href="{{ url_for('main.contacts') }}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        {% if current_user() %}
          {% if current_user().role == 'admin' %}
            <a href="{{ url_for('admin.dashboard') }}">–ê–¥–º–∏–Ω</a>
          {% endif %}
          <a href="{{ url_for('main.account') }}">–ö–∞–±–∏–Ω–µ—Ç</a>
          <form action="{{ url_for('auth.logout') }}" method="post">
            <button class="btn btn-ghost w-full" type="submit">–í—ã–π—Ç–∏</button>
          </form>
        {% else %}
          <a class="btn btn-ghost w-full" href="{{ url_for('auth.login') }}">–í—Ö–æ–¥</a>
          <a class="btn btn-primary w-full" href="{{ url_for('auth.register') }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        {% endif %}
      </div>
    </div>

    {# Bottom nav is also mobile-only and has another structure #}
    <nav class="bottom-nav">
      <a href="{{ url_for('main.home') }}">üè†<span>–ì–ª–∞–≤–Ω–∞—è</span></a>
      <a href="{{ url_for('main.catalog') }}">üõí<span>–ö–∞—Ç–∞–ª–æ–≥</span></a>
      <a href="{{ url_for('main.cart') }}">üß∫<span>–ö–æ—Ä–∑–∏–Ω–∞</span><b class="dot">{{ cart_count() }}</b></a>
      {% if current_user() %}
        <a href="{{ url_for('main.account') }}">üë§<span>–ö–∞–±–∏–Ω–µ—Ç</span></a>
      {% else %}
        <a href="{{ url_for('auth.login') }}">üîë<span>–í—Ö–æ–¥</span></a>
      {% endif %}
    </nav>
  </header>

  <main class="container main">
    {% include "components/_flash.html" %}
    {% block content %}{% endblock %}
  </main>

  <footer class="footer">
    <div class="container footer-row">
      <div>
        <div class="brand muted">ShopLite</div>
        <div class="muted">–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç‚Äë–º–∞–≥–∞–∑–∏–Ω–∞.</div>
      </div>
      <div class="footer-links">
        <a href="{{ url_for('main.about') }}">–û –Ω–∞—Å</a>
        <a href="{{ url_for('main.contacts') }}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        <a href="{{ url_for('main.catalog') }}">–ö–∞—Ç–∞–ª–æ–≥</a>
      </div>
    </div>
  </footer>
</body>
</html>
